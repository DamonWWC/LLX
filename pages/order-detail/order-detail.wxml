<!--pages/order-detail/order-detail.wxml-->
<view class="container">
  <view class="detail-content" wx:if="{{order}}">
    <!-- 订单状态 -->
    <view class="status-section">
      <view class="status-icon">📦</view>
      <view class="status-text">{{order.status}}</view>
    </view>

    <!-- 订单号 -->
    <view class="order-no-section">
      <text class="label">订单号</text>
      <text class="value">{{order.orderNo}}</text>
    </view>

    <!-- 收货信息 -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">📍</text>
        <text class="title-text">收货信息</text>
      </view>
      <view class="info-row">
        <text class="label">收货人</text>
        <text class="value">{{order.address.name}}</text>
      </view>
      <view class="info-row">
        <text class="label">联系电话</text>
        <text class="value">{{order.address.phone}}</text>
      </view>
      <view class="info-row address">
        <text class="label">收货地址</text>
        <text class="value">{{order.address.province}}{{order.address.city}}{{order.address.district}}{{order.address.detail}}</text>
      </view>
    </view>

    <!-- 商品明细 -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">📋</text>
        <text class="title-text">商品明细</text>
      </view>
      <view class="product-list">
        <view class="product-item" wx:for="{{order.products}}" wx:key="id" wx:for-index="idx">
          <view class="product-info">
            <view class="product-name">{{idx + 1}}.{{item.name}}（{{item.weight}}斤/{{item.unit}}）单价：{{item.price}}元</view>
            <view class="product-detail">数量：{{item.quantity}}{{item.unit}} ，总重：{{item.quantity * item.weight}}斤 ，总价：{{item.subtotal}}元</view>
          </view>
        </view>
      </view>
    </view>

    <!-- 价格汇总 -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">💰</text>
        <text class="title-text">价格汇总</text>
      </view>
      <view class="price-row">
        <text class="label">商品总价</text>
        <text class="value">{{order.totalRicePrice || order.grandTotal}}元</text>
      </view>
      <view class="price-row" wx:if="{{order.totalWeight}}">
        <text class="label">总重量</text>
        <text class="value">{{order.totalWeight}}斤</text>
      </view>
      <view class="price-row" wx:if="{{order.totalShipping}}">
        <text class="label">运费 ({{order.shippingRate}}元/斤)</text>
        <text class="value">{{order.totalShipping}}元</text>
      </view>
      <view class="price-row total">
        <text class="label">实付款</text>
        <text class="value grand">{{order.grandTotal}}元</text>
      </view>
    </view>

    <!-- 订单信息 -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">ℹ️</text>
        <text class="title-text">订单信息</text>
      </view>
      <view class="info-row">
        <text class="label">下单时间</text>
        <text class="value">{{order.createTime}}</text>
      </view>
      <view class="info-row">
        <text class="label">订单状态</text>
        <text class="value status">{{order.status}}</text>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:else>
    <text class="empty-icon">📭</text>
    <text class="empty-text">订单不存在</text>
  </view>
</view>

