<!--pages/order-detail/order-detail.wxml-->
<view class="container">
  <view class="detail-content" wx:if="{{order}}">
    <!-- è®¢å•çŠ¶æ€ -->
    <view class="status-section">
      <view class="status-icon">ğŸ“¦</view>
      <view class="status-text">{{order.status}}</view>
    </view>

    <!-- è®¢å•å· -->
    <view class="order-no-section">
      <text class="label">è®¢å•å·</text>
      <text class="value">{{order.orderNo}}</text>
    </view>

    <!-- æ”¶è´§ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">ğŸ“</text>
        <text class="title-text">æ”¶è´§ä¿¡æ¯</text>
      </view>
      <view class="info-row">
        <text class="label">æ”¶è´§äºº</text>
        <text class="value">{{order.address.name}}</text>
      </view>
      <view class="info-row">
        <text class="label">è”ç³»ç”µè¯</text>
        <text class="value">{{order.address.phone}}</text>
      </view>
      <view class="info-row address">
        <text class="label">æ”¶è´§åœ°å€</text>
        <text class="value">{{order.address.province}}{{order.address.city}}{{order.address.district}}{{order.address.detail}}</text>
      </view>
    </view>

    <!-- å•†å“æ˜ç»† -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">ğŸ“‹</text>
        <text class="title-text">å•†å“æ˜ç»†</text>
      </view>
      <view class="product-list">
        <view class="product-item" wx:for="{{order.products}}" wx:key="id" wx:for-index="idx">
          <view class="product-info">
            <view class="product-name">{{idx + 1}}.{{item.name}}ï¼ˆ{{item.weight}}æ–¤/{{item.unit}}ï¼‰å•ä»·ï¼š{{item.price}}å…ƒ</view>
            <view class="product-detail">æ•°é‡ï¼š{{item.quantity}}{{item.unit}} ï¼Œæ€»é‡ï¼š{{item.quantity * item.weight}}æ–¤ ï¼Œæ€»ä»·ï¼š{{item.subtotal}}å…ƒ</view>
          </view>
        </view>
      </view>
    </view>

    <!-- ä»·æ ¼æ±‡æ€» -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">ğŸ’°</text>
        <text class="title-text">ä»·æ ¼æ±‡æ€»</text>
      </view>
      <view class="price-row">
        <text class="label">å•†å“æ€»ä»·</text>
        <text class="value">{{order.totalRicePrice || order.grandTotal}}å…ƒ</text>
      </view>
      <view class="price-row" wx:if="{{order.totalWeight}}">
        <text class="label">æ€»é‡é‡</text>
        <text class="value">{{order.totalWeight}}æ–¤</text>
      </view>
      <view class="price-row" wx:if="{{order.totalShipping}}">
        <text class="label">è¿è´¹ ({{order.shippingRate}}å…ƒ/æ–¤)</text>
        <text class="value">{{order.totalShipping}}å…ƒ</text>
      </view>
      <view class="price-row total">
        <text class="label">å®ä»˜æ¬¾</text>
        <text class="value grand">{{order.grandTotal}}å…ƒ</text>
      </view>
    </view>

    <!-- è®¢å•ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">
        <text class="title-icon">â„¹ï¸</text>
        <text class="title-text">è®¢å•ä¿¡æ¯</text>
      </view>
      <view class="info-row">
        <text class="label">ä¸‹å•æ—¶é—´</text>
        <text class="value">{{order.createTime}}</text>
      </view>
      <view class="info-row">
        <text class="label">è®¢å•çŠ¶æ€</text>
        <text class="value status">{{order.status}}</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">è®¢å•ä¸å­˜åœ¨</text>
  </view>
</view>

