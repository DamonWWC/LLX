# 发货单导出功能说明

## 📦 功能概述

在订单管理页面新增了"发货单"导出功能，可以导出不含价格和运费信息的订单内容，专门用于发货场景。

## ✨ 功能特点

### 1️⃣ 不含价格信息
- ❌ 不显示商品价格
- ❌ 不显示商品小计
- ❌ 不显示订单总价
- ❌ 不显示运费信息

### 2️⃣ 完整收货信息
- ✅ 收件人姓名
- ✅ 联系电话
- ✅ 完整收货地址（省市区+详细地址）

### 3️⃣ 详细商品信息
- ✅ 商品名称
- ✅ 商品数量
- ✅ 商品重量（如有）
- ✅ 商品种类统计
- ✅ 商品总数统计
- ✅ 总重量统计

### 4️⃣ 订单基本信息
- ✅ 订单号
- ✅ 下单时间
- ✅ 发货说明

## 🎯 使用场景

### 适用场景
1. **仓库发货**：给仓库人员的拣货清单
2. **物流配送**：给快递员的送货单据
3. **客户确认**：给客户核对商品数量
4. **内部管理**：不涉及价格的订单管理

### 不适用场景
- 需要价格信息的场景请使用"订单"导出功能
- 财务结算请使用完整订单信息

## 📋 导出内容示例

### 发货单格式
```
━━━━━━━━━━━━━━━━━━━━━━
          发货单
━━━━━━━━━━━━━━━━━━━━━━

订单号: 20241016XXXXXX

━━━━━━━━━━━━━━━━━━━━━━

收货信息

收件人：张三
联系电话：13812345678

收货地址：
广东省深圳市南山区
科技园南路10号腾讯大厦

━━━━━━━━━━━━━━━━━━━━━━

商品明细

1. 五常大米
   数量：2 份
   重量：10 斤

2. 东北香米
   数量：1 份
   重量：5 斤

━━━━━━━━━━━━━━━━━━━━━━

总计信息

商品种类：2 种
商品总数：3 份
总重量：15 斤

━━━━━━━━━━━━━━━━━━━━━━

* 请核对商品数量和收货地址
下单时间: 2024-10-16 14:30:25

```

## 🔄 订单导出 vs 发货单导出

| 项目 | 订单导出 | 发货单导出 |
|------|----------|------------|
| **标题** | 订单详情 | 发货单 |
| **商品价格** | ✅ 显示 | ❌ 不显示 |
| **运费信息** | ✅ 显示 | ❌ 不显示 |
| **订单总价** | ✅ 显示 | ❌ 不显示 |
| **收货信息** | ✅ 显示 | ✅ 显示（更详细） |
| **商品数量** | ✅ 显示 | ✅ 显示（更详细） |
| **商品重量** | 🟡 简单显示 | ✅ 详细显示 |
| **统计信息** | 🟡 金额统计 | ✅ 数量统计 |
| **使用场景** | 财务结算 | 仓库发货 |

## 🚀 使用方法

### 操作步骤

1. **进入订单页面**
   - 打开小程序
   - 点击"我的" → "我的订单"

2. **选择订单**
   - 找到需要导出的订单
   - 点击"📋 发货单"按钮

3. **生成发货单**
   - 系统自动生成发货单图片
   - 显示"生成发货单..."提示

4. **保存到相册**
   - 发货单自动保存到手机相册
   - 显示"已保存到相册"提示

5. **使用发货单**
   - 从相册打开发货单图片
   - 打印或分享给相关人员

### 按钮说明

在订单操作区域，有以下按钮：

| 按钮 | 功能 | 图标颜色 |
|------|------|----------|
| **查看详情** | 弹窗显示订单详情 | 灰色 |
| **📥 订单** | 导出完整订单（含价格） | 蓝色 |
| **📋 发货单** | 导出发货单（不含价格） | 紫色 |
| **📤 分享** | 分享订单给他人 | 绿色 |
| **删除** | 删除订单 | 红色 |

## 💡 实用技巧

### 1. 批量打印
- 连续导出多个发货单
- 从相册批量选择
- 使用打印应用批量打印

### 2. 微信分享
- 导出发货单后
- 从相册打开图片
- 通过微信发送给仓库或快递员

### 3. 云端备份
- 将发货单保存到云盘
- 便于随时查看和打印
- 避免丢失

### 4. 二次编辑
- 导出后可用图片编辑工具
- 添加备注或标记
- 便于特殊说明

## ⚙️ 技术细节

### 生成内容

**包含的信息**：
```javascript
{
  title: "发货单",
  orderNo: "订单号",
  recipient: {
    name: "收件人",
    phone: "联系电话",
    address: "完整地址"
  },
  products: [
    {
      name: "商品名称",
      quantity: "数量",
      weight: "重量"  // 如有
    }
  ],
  summary: {
    productTypes: "商品种类",
    totalQuantity: "商品总数",
    totalWeight: "总重量"  // 如有
  },
  createTime: "下单时间"
}
```

**不包含的信息**：
- ❌ 商品单价
- ❌ 商品小计
- ❌ 商品总价
- ❌ 运费单价
- ❌ 总运费
- ❌ 实付款金额

### 生成规格
- **格式**：PNG图片
- **宽度**：屏幕宽度 - 40px
- **高度**：600px（自适应内容）
- **分辨率**：根据设备像素比自动调整
- **背景**：白色
- **保存位置**：手机相册

## 🔍 常见问题

### Q1: 为什么要分开导出？
**A**: 不同场景需要不同信息：
- **订单导出**：用于财务结算，需要完整价格信息
- **发货单导出**：用于仓库发货，不需要价格信息，避免信息泄露

### Q2: 发货单可以修改吗？
**A**: 导出的是图片格式，可以使用图片编辑工具添加备注或标记。

### Q3: 发货单保存在哪里？
**A**: 自动保存到手机相册，可以在相册的"最近项目"中找到。

### Q4: 可以批量导出吗？
**A**: 目前是单个导出，可以连续操作多个订单。

### Q5: 没有权限保存怎么办？
**A**: 
1. 系统会提示"需要授权保存到相册"
2. 点击"去设置"
3. 开启"保存图片到相册"权限
4. 返回重试

### Q6: 导出失败怎么办？
**A**: 可能原因：
- 网络不稳定：检查网络连接
- 存储空间不足：清理手机空间
- 权限未开启：检查相册权限
- 系统版本过低：更新微信或系统

## 📊 对比示例

### 场景1：给仓库人员
**使用**：发货单导出 ✅
- 显示完整地址
- 显示商品数量和种类
- 不显示价格信息
- 便于拣货和打包

### 场景2：给财务结算
**使用**：订单导出 ✅
- 显示完整价格信息
- 显示运费明细
- 显示实付款金额
- 便于对账和结算

### 场景3：给客户确认
**两者都可以**：
- 发货单：客户关心数量和地址
- 订单：客户关心价格和金额

## 📝 更新日志

### v1.0 (2024-10-16)
- ✅ 新增发货单导出功能
- ✅ 支持不含价格信息的导出
- ✅ 优化收货信息显示
- ✅ 增强商品明细展示
- ✅ 添加统计信息汇总

## 🎨 界面展示

### 按钮样式
- **发货单按钮**：紫色主题（#722ed1）
- **图标**：📋 剪贴板图标
- **位置**：在"订单"和"分享"按钮之间
- **交互**：点击有缩放动画

### 生成提示
- 生成中：显示"生成发货单..."加载提示
- 生成成功：显示"已保存到相册"
- 生成失败：显示"生成失败"

## 🔐 隐私保护

### 数据安全
- ✅ 不显示价格信息
- ✅ 不显示支付信息
- ✅ 仅包含发货必需信息
- ✅ 本地生成，不上传服务器

### 适用场景
- 可以放心分享给仓库人员
- 可以放心分享给快递员
- 不会泄露价格敏感信息
- 保护商业隐私

## 📞 反馈建议

如有问题或建议，欢迎反馈：
- 功能改进建议
- 界面优化建议
- Bug反馈

---

**版本**：v1.0  
**更新日期**：2024-10-16  
**兼容性**：微信小程序  
**状态**：✅ 已完成并测试

